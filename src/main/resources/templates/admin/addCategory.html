<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<title th:text="#{category.addingCategory}"></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

</head>

<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
	integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	crossorigin="anonymous">

<body>
	<th:block th:insert="fragments/navBar.html"/>

	<h1 align="center" th:text="#{category.addingCategory}"></h1>

	<div align="center">
	<form class="form-horizontal" th:action="@{/admin/addCategory}" method="post" enctype="multipart/form-data">
    <div class="form-group">
      <label class="control-label col-sm-2" ><font color="Light Slate Blue" size="4" th:text="#{category.name} + ':'"></font></label>
      <div class="col-sm-10">
        <input type="text" class="form-control" th:placeholder="#{category.name}" name="name" required="required">
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" ><font color="Light Slate Blue" size="4" th:text="#{category.preview} + ':'"></font></label>
      <div class="col-sm-10">          
        <input type="file" name="previewFile" required="required"
        accept="image/jpeg,image/png,image/gif" id="file" onchange="Filevalidation(this)">
      </div>
       <label class="control-label col-sm-2" th:text="#{fileSizeMessage}"></label>
    </div>
    <div class="form-group">        
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-primary" th:text="#{actions.submit}"></button>
      </div>
    </div>
  </form>
  </div>
</body>
<th:block th:insert="fragments/footer.html" />
<script> 
    function Filevalidation(fi){ 
        if (fi.files.length > 0) { 
            for (const i = 0; i <= fi.files.length - 1; i++) { 
  
                const fsize = fi.files.item(i).size; 
                const file = Math.round((fsize / 1024)); 
                if (file >= 1024) { 
                    alert( 
                      "File too Big, please select a file less than 1mb"); 
                    fi.value = '';
                } else { 
                    document.getElementById('size').innerHTML = '<b>'
                    + file + '</b> KB'; 
                } 
            } 
        } 
    } 
</script> 

</html>